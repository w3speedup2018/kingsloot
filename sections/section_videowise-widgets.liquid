{%- comment -%}
//    !!!! - DO NOT MODIFY - !!!!
//    THIS FILE IS DEPLOYED AUTOMATICALLY BY GITHUB.
//    CHANGES YOU MAKE MAY BE AUTOMATICALLY OVERWRITTEN AT ANY TIME.
//
//    Github is used to create an automated theme deployment pipeline for Shopify,
//    it is used to provide version control, theme testing and reliable deployment environments.
//
//    If you need to modify this file, please contact Juno eCommerce.
{%- endcomment -%}

{% comment %} Please do not edit this file. It is automatically generated by Videowise{% endcomment %}

<div class="page-width">

    {% if isProduct == false %}
      {% assign publishedPages = shop.metafields.videowise.published-pages.value %}
      {% assign currentURL = shop.url %}
  
      {% if request.path.size > 1 %}
        {% assign currentURL = shop.url | append: request.path %}
      {% endif %}
  
      {% assign isPageWidgetFound = false %}
      {% for wpage in publishedPages %}
        {% if currentURL == wpage.url %}
          {% for widget in wpage.widgets %}
            {% if section.settings.widget_selector == widget %}
              {% assign isPageWidgetFound = true %}
              <div class="reeview-app-widget" id="reeview-app-widget_{{ widget }}">
                <div class="vw__section-loader">&#x20;</div>
              </div>
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endfor %}
  
      {% if isPageWidgetFound == false and content_for_header contains "Shopify.designMode" %}
        <div class="vw-front__section">
          <div class="vw-front__section-inner">
            <div class="vw-front__icon"></div>
            <p>Please select the video widget you would like to use in this section.</p>
          </div>
        </div>
      {% endif %}
  
    {% else %}
      {% assign widgets = product.metafields.videowise.widgets.value %}
      {% assign isProductWidgetFound = false %}
      {% for widget in widgets %}
        {% if section.settings.widget_selector == widget %}
          {% assign isProductWidgetFound = true %}
          <div class="reeview-app-widget" id="reeview-app-widget_{{ widget }}">
            <div class="vw__section-loader">&#x20;</div>
            <script>
              setTimeout(function() {
                var elementId = '{{ widget }}';
                var widgetElementRoot = document.getElementById('reeview-app-widget_' + elementId);
                var loaderElement = widgetElementRoot.querySelector('.vw__section-loader');
                loaderElement.remove();
              }, 2000);
            </script>
          </div>
        {% endif %}
      {% endfor %}
      {% if isProductWidgetFound == false and content_for_header contains "Shopify.designMode" %}
        <div class="vw-front__section">
          <div class="vw-front__section-inner">
            <div class="vw-front__icon"></div>
            <p>Please select the video widget you would like to use in this section.</p>
          </div>
        </div>
      {% endif %}
    {% endif %}
  
</div>

{% schema %}
{
"name": "Videowise Video Widget",
"templates": ["product"],
"settings": [{"type":"select","id":"widget_selector","label":{"en":"Select widget"},"options":[{"value":"1","label":{"en":"Select widget"}},{"value":"6242029eb2f18b0029bb9c68","label":{"en":"YouTube videos"}},{"value":"624203c9b2f18b0029bdc043","label":{"en":"Upload videos"}}],"default":"1"},{"type":"paragraph","content":"Edit video widget [Open VideoWise](https://app.videowise.com/sites/undefined/pages-parent)"},{"type":"paragraph","content":"Need help? [Contact VideoWise support](https://app.videowise.com/sites/undefined/support)"}],
"presets": [
{
"name": "Videowise Video Widget",
"category": "Videowise Sections"
}
]
}
{% endschema %}


{% stylesheet %}
/*Please do not edit this file. It is automatically updated by Videowise*/

.vw__section-loader {
    display: block;
    border: 8px solid #f3f3f3;
    border-top: 8px solid #d8e2e8;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 2s linear infinite;
    margin-left: auto;
    margin-right: auto;
  }
  
  .vw-front__section {
    background: #EDEDED;
  }
  
  .vw-front__section-inner {
    padding: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }
  
  .vw-front__section-inner p {
    color: #121212;
    font-size: 14px;
    line-height: 20px;
    font-weight: 400;
    margin: 0;
  }
  
  .vw-front__icon {
    background: rgba(199, 199, 199, 0.8);
    border-radius: 50px;
    width: 72px;
    height: 72px;
    position: relative;
    margin-bottom: 16px;
  }
  
  
  .vw-front__icon::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 26px;
    height: 0;
    border-top: 16px solid transparent;
    border-bottom: 16px solid transparent;
    border-left: 24px solid #fff;
    transform: translateY(-50%)
  }
  
  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
  
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
