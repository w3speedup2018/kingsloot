"use strict";(self.webpackChunkjuno_shopify_template=self.webpackChunkjuno_shopify_template||[]).push([[186],{2316:(t,e,i)=>{i.r(e),i.d(e,{MiniCart:()=>h});var n=i(8883),s=i(9552),r=i(1637),a=i(4454),c=i(6282);class o{constructor(t,e){this.bindListener=()=>{this.items.forEach((t=>{const e=(0,n.U2)(".js-remove-item",t);e.addEventListener("click",(i=>{i.preventDefault(),this.removeItem(t,e.dataset.id)}))}))},this.removeItem=(t,e)=>{(0,c.J8)({id:e,quantity:0}).then((()=>{this.fetchCart?fetchCart():window.location.reload()})).catch((t=>{console.warn("Error with removeItem: ",t)})),t.remove()},this.cart=t,this.items=(0,n.go)(".js-cart-item",this.cart),this.fetchCart=e,this.bindListener()}}class h{constructor(t){this.initCart=()=>{(0,a.h)(this.element,this.openTrigger),(0,a.M)(this.element),new s.h(this.element,this.fetchCart),new o(this.element,this.fetchCart)},this.fetchCart=()=>{fetch("/cart").then((t=>{t.text().then((t=>{this.renderCart(t)})).catch((t=>{console.warn("response.text error: ",t)}))})).catch((t=>console.warn("Something went wrong.",t)))},this.renderCart=t=>{const e=(new DOMParser).parseFromString(t,"text/html"),i=(0,n.U2)(".js-mini-cart",e);this.element.innerHTML=i.innerHTML,this.initCart(),(0,r.h)(),window.BOLD&&BOLD.common&&BOLD.common.eventEmitter&&"function"==typeof BOLD.common.eventEmitter.emit&&BOLD.common.eventEmitter.emit("BOLD_COMMON_cart_loaded")},this.element=t,this.openTrigger=(0,n.U2)(".js-minicart-trigger",document),this.container=(0,n.U2)(".js-mini-cart",this.element),this.openTrigger&&this.bindEvents()}bindEvents(){(0,a.h)(this.element,this.openTrigger),(0,a.M)(this.element,this.openTrigger),new s.h(this.element,this.fetchCart),new o(this.element,this.fetchCart)}}},1637:(t,e,i)=>{i.d(e,{h:()=>s});var n=i(8883);const s=()=>{const t=(0,n.U2)(".js-minicart-count",document);fetch("/cart.js").then((t=>t.json())).then((e=>{t.innerHTML=e.item_count}))}},4454:(t,e,i)=>{i.d(e,{M:()=>r,h:()=>s});var n=i(8883);const s=(t,e)=>{e&&e.addEventListener("click",(e=>{e.preventDefault(),t.classList.add("is-active")}))},r=t=>{const e=(0,n.U2)(".js-minicart-close",t);e&&e.addEventListener("click",(()=>{t.classList.remove("is-active")}))}},9552:(t,e,i)=>{i.d(e,{h:()=>r});var n=i(8883),s=i(6282);class r{constructor(t,e){this.cart=t,this.fetchCart=e,this.bindListener()}bindListener(){this.updateQty()}updateQty(){this.items=(0,n.go)(".js-cart-item",this.cart),this.items.forEach((t=>{const e=(0,n.U2)(".js-qty-minus",t),i=(0,n.U2)(".js-qty-plus",t),s=(0,n.U2)(".js-qty-value",t),r=s.getAttribute("data-id");e.addEventListener("click",(()=>{this.fetchCart?this.minusQuantity(r,s,this.fetchCart):this.minusQuantity(r,s),window.BOLD&&BOLD.common&&BOLD.common.eventEmitter&&"function"==typeof BOLD.common.eventEmitter.emit&&BOLD.common.eventEmitter.emit("BOLD_COMMON_cart_loaded")})),i.addEventListener("click",(()=>{this.fetchCart?this.plusQuantity(r,s,this.fetchCart):this.plusQuantity(r,s),window.BOLD&&BOLD.common&&BOLD.common.eventEmitter&&"function"==typeof BOLD.common.eventEmitter.emit&&BOLD.common.eventEmitter.emit("BOLD_COMMON_cart_loaded")})),s.addEventListener("change",(t=>{this.fetchCart?this.setQuantity(r,t.target.value,this.fetchCart):this.setQuantity(r,t.target.value)}))}))}setQuantity(t,e,i){(0,s.J8)({id:t,quantity:e}).then((()=>{i?i():window.location.reload()})).catch((t=>{console.warn("Error with setQuantity: ",t)}))}plusQuantity(t,e,i){e.value++,(0,s.J8)({id:t,quantity:e.value}).then((()=>{i?i():window.location.reload()})).catch((t=>{console.warn("Error with plusQuantity: ",t)}))}minusQuantity(t,e,i){e.value>=1&&(e.value--,(0,s.J8)({id:t,quantity:e.value}).then((()=>{i?i():window.location.reload()})).catch((t=>{console.warn("Error with minusQuantity: ",t)})))}}},6282:(t,e,i)=>{i.d(e,{J8:()=>n});async function n(t){return fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}}}]);