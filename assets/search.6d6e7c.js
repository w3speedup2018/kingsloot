"use strict";(self.webpackChunkjuno_shopify_template=self.webpackChunkjuno_shopify_template||[]).push([[464],{2178:(t,e,s)=>{function r(){var t=Error.call(this);return t.name="Server error",t.message="Something went wrong on the server",t.status=500,t}function i(t){var e=Error.call(this);return e.name="Not found",e.message="Not found",e.status=t,e}function n(){var t=Error.call(this);return t.name="Server error",t.message="Something went wrong on the server",t.status=500,t}function a(t){var e=Error.call(this);return e.name="Content-Type error",e.message="Content-Type was not provided or is of wrong type",e.status=t,e}function o(t){var e=Error.call(this);return e.name="JSON parse error",e.message="JSON syntax error",e.status=t,e}function c(t,e,s,r){var i=Error.call(this);return i.name=e,i.message=s,i.status=t,i.retryAfter=r,i}function u(t,e,s){var r=Error.call(this);return r.name=e,r.message=s,r.status=t,r}function h(t,e,s){var r=Error.call(this);return r.name=e,r.message=s,r.status=t,r}function l(){this.events={}}function p(t){this.eventName=t,this.callbacks=[]}function d(t){this._store={},this._keys=[],t&&t.bucketSize?this.bucketSize=t.bucketSize:this.bucketSize=20}function f(t,e){var s="";return e=e||null,Object.keys(t).forEach((function(r){var i=r+"=";switch(e&&(i=e+"["+r+"]"),function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}(t[r])){case"object":s+=f(t[r],e?i:r);break;case"array":s+=i+"="+t[r].join(",")+"&";break;default:e&&(i+="="),s+=i+encodeURIComponent(t[r])+"&"}})),s}s.r(e),s.d(e,{SearchForm:()=>E}),l.prototype.on=function(t,e){var s=this.events[t];s||(s=new p(t),this.events[t]=s),s.registerCallback(e)},l.prototype.off=function(t,e){var s=this.events[t];s&&s.callbacks.indexOf(e)>-1&&(s.unregisterCallback(e),0===s.callbacks.length&&delete this.events[t])},l.prototype.dispatch=function(t,e){var s=this.events[t];s&&s.fire(e)},p.prototype.registerCallback=function(t){this.callbacks.push(t)},p.prototype.unregisterCallback=function(t){var e=this.callbacks.indexOf(t);e>-1&&this.callbacks.splice(e,1)},p.prototype.fire=function(t){this.callbacks.slice(0).forEach((function(e){e(t)}))},d.prototype.set=function(t,e){if(this.count()>=this.bucketSize){var s=this._keys.splice(0,1);this.delete(s)}return this._keys.push(t),this._store[t]=e,this._store},d.prototype.get=function(t){return this._store[t]},d.prototype.has=function(t){return Boolean(this._store[t])},d.prototype.count=function(){return Object.keys(this._store).length},d.prototype.delete=function(t){var e=Boolean(this._store[t]);return delete this._store[t],e&&!this._store[t]};var g=function(t,e){var s=null;return function(){var r=this,i=arguments;clearTimeout(s),s=setTimeout((function(){s=null,t.apply(r,i)}),e||0)}}((function(t,e,s,l,p){var d=new XMLHttpRequest,f=t+"/suggest.json";d.onreadystatechange=function(){if(d.readyState!==XMLHttpRequest.DONE);else{var t=d.getResponseHeader("Content-Type");if(d.status>=500)return void p(new n);if(404===d.status)return void p(new i(d.status));if("string"!=typeof t||null===t.toLowerCase().match("application/json"))return void p(new a(d.status));if(417===d.status){try{var e=JSON.parse(d.responseText);p(new u(d.status,e.message,e.description))}catch(t){p(new o(d.status))}return}if(422===d.status){try{var f=JSON.parse(d.responseText);p(new h(d.status,f.message,f.description))}catch(t){p(new o(d.status))}return}if(429===d.status){try{var g=JSON.parse(d.responseText);p(new c(d.status,g.message,g.description,d.getResponseHeader("Retry-After")))}catch(t){p(new o(d.status))}return}if(200===d.status){try{var m=JSON.parse(d.responseText);m.query=s,l(m)}catch(t){p(new o(d.status))}return}try{var v=JSON.parse(d.responseText);p(new r(d.status,v.message,v.description))}catch(t){p(new o(d.status))}}},d.open("get",f+"?q="+encodeURIComponent(s)+"&"+e),d.setRequestHeader("Content-Type","application/json"),d.send()}),10);function m(t){if(!t)throw new TypeError("No config object was specified");var e=t;this._retryAfter=null,this._currentQuery=null,this.dispatcher=new l,this.cache=new d({bucketSize:40}),this.searchPath=e.search_path||"/search",e.search_path&&delete e.search_path,this.configParams=f(e)}function v(t){return"string"!=typeof t?null:t.trim().replace(" ","-").toLowerCase()}m.SEARCH_PATH="/search",m.TYPES={PRODUCT:"product",PAGE:"page",ARTICLE:"article",COLLECTION:"collection"},m.FIELDS={AUTHOR:"author",BODY:"body",PRODUCT_TYPE:"product_type",TAG:"tag",TITLE:"title",VARIANTS_BARCODE:"variants.barcode",VARIANTS_SKU:"variants.sku",VARIANTS_TITLE:"variants.title",VENDOR:"vendor"},m.UNAVAILABLE_PRODUCTS={SHOW:"show",HIDE:"hide",LAST:"last"},m.prototype.query=function(t){try{!function(t){var e;if(null==t)throw(e=new TypeError("'query' is missing")).type="argument",e;if("string"!=typeof t)throw(e=new TypeError("'query' is not a string")).type="argument",e}(t)}catch(t){return void this.dispatcher.dispatch("error",t)}if(""===t)return this;this._currentQuery=v(t);var e=this.cache.get(this._currentQuery);return e?(this.dispatcher.dispatch("success",e),this):(g(this.searchPath,this.configParams,t,function(t){this.cache.set(v(t.query),t),v(t.query)===this._currentQuery&&(this._retryAfter=null,this.dispatcher.dispatch("success",t))}.bind(this),function(t){t.retryAfter&&(this._retryAfter=t.retryAfter),this.dispatcher.dispatch("error",t)}.bind(this)),this)},m.prototype.on=function(t,e){return this.dispatcher.on(t,e),this},m.prototype.off=function(t,e){return this.dispatcher.off(t,e),this};var y=s(8883),_=s(2768);class E extends HTMLElement{constructor(){super(),this.element=this,this.form=(0,y.U2)(".js-search-form",this.element),this.input=(0,y.U2)(".js-search-input",this.form),this.results=(0,y.U2)(".js-search-results",this.element),this.searchPage=(0,y.U2)(".js-search-grid",document),this.page=(0,y.U2)(".js-page",document),this.itemClicked=!1,this.bindEvents(),this.trigger=(0,y.U2)(".js-search-trigger")}bindEvents(){this.input.addEventListener("input",(()=>{this.isInputEmpty(this.input.value)?this.results.classList.remove("is-active"):(this.predictiveSearch(this.input.value),this.results.classList.add("is-active"))})),this.results.addEventListener("click",(()=>{this.itemClicked=!0})),this.page.addEventListener("click",(()=>{this.input!==document.activeElement&&this.closeSearchDropdown()})),this.input.addEventListener("focusin",(()=>{this.isInputEmpty(this.input.value)||(this.predictiveSearch(this.input.value),this.results.classList.add("is-active"))})),this.searchPage&&this.initSearchCookie()}closeSearchDropdown(){this.results.classList.contains("is-active")&&!1===this.itemClicked&&this.results.classList.remove("is-active")}predictiveSearch(t){const e=new m({resources:{type:[m.TYPES.PRODUCT],limit:6,options:{fields:[m.FIELDS.TITLE,m.FIELDS.VENDOR,m.FIELDS.PRODUCT_TYPE,m.FIELDS.VARIANTS_TITLE,m.FIELDS.VARIANTS_SKU,m.FIELDS.VARIANTS_BARCODE,m.FIELDS.TAG]}}});e.on("success",(t=>{const e=t.resources.results.products;e.length>0?this.searchRender(e):this.results.innerHTML="<span>No suggestions</span>"})),e.on("error",(t=>{console.error("Error message:",t.message)})),e.query(t)}searchRender(t){let e="";t.forEach((t=>{const s=window.theme.moneyFormat.includes("{{amount_no_decimals}}")?"{{amount_no_decimals}}":"{{amount}}";let r=window.theme.moneyFormat.replace(s,t.price);t.tags.forEach((t=>{t.includes("coogar_enquire")&&(r=r.replace("Â£","$"))})),e+=`\n                <a href="${t.url}" class="c-product-card">\n                    <picture class="c-product-card__image  c-product-card__image--suggestion  o-img__frame  o-ar--cart-image  js-image">\n                        <img\n                            class="o-img  o-img--cover  o-ar__item"\n                            src="${t.image}"\n                            alt="${t.image.alt}"\n                            loading="lazy"\n                            width="100%"\n                            height="100%"\n                        />\n                    </picture>\n                    <div class="c-product-card__details  c-product-card__details--suggestion">\n                        <h4 class="t-heading c-product-card__details-title  t-font-size--eta">\n                            ${t.title}\n                        </h4>\n                        <p class="c-product-card__price" >\n                            ${r}\n                        </p>\n                    </div>\n                </a>\n            `})),this.results.innerHTML=e}isInputEmpty(t){return!t||/^\s*$/.test(t)}initSearchCookie(){(0,y.go)(".js-product-card",this.searchPage).forEach((t=>{t.addEventListener("click",(()=>{const t=window.location.href;(0,_.d8)("js-search-cookie",t,28)}))}))}}},2768:(t,e,s)=>{function r(t,e,s){var r=new Date;r.setTime(r.getTime()+24*s*60*60*1e3);var i="expires="+r.toUTCString();document.cookie=t+"="+e+";"+i+";path=/"}function i(t){for(var e=t+"=",s=document.cookie.split(";"),r=0;r<s.length;r++){for(var i=s[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(e))return i.substring(e.length,i.length)}return""}s.d(e,{d8:()=>r,ej:()=>i})}}]);